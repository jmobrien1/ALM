<!doctype html>
<html lang="en">
<head>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Data Card Marketplace | Allegiance List Marketing</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    :root{--primary:#0A3D62;--accent:#DC2626;--ink:#1A202C;--muted:#64748b;--light:#F4F7F9;--border:#e5e7eb}
    *{box-sizing:border-box} body{margin:0;font-family:'Roboto',sans-serif;color:var(--ink);background:var(--light)}
    h1,h2{font-family:'Montserrat',sans-serif;color:var(--primary)}
    .header{background:#fff;border-bottom:1px solid rgba(10,61,98,.1)}
    .nav{max-width:1200px;margin:0 auto;height:96px;display:flex;align-items:center;justify-content:space-between;padding:0 20px}
    .brand{display:flex;align-items:center;text-decoration:none}
    .brand img{height:96px;width:auto;display:block}
    .links a{text-decoration:none;color:var(--ink);margin-left:22px;font-weight:600}
    .wrap{max-width:1200px;margin:0 auto;padding:24px 20px 56px}
    .lead{color:#475569;max-width:740px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px;margin-top:20px}
    .card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:16px;display:flex;flex-direction:column;gap:10px}
    .meta{display:flex;gap:10px;flex-wrap:wrap;color:#475569;font-size:.95rem}
    .pill{background:#F1F5F9;border:1px solid #E2E8F0;border-radius:999px;padding:6px 10px}
    .btn{align-self:flex-start;background:var(--primary);color:#fff;font-weight:700;text-decoration:none;border-radius:10px;padding:10px 14px}
    .search{margin-top:16px;display:flex;gap:10px}
    .search input{flex:1;padding:12px 14px;border:1px solid var(--border);border-radius:10px}
  </style>
</head>
<body>
  <header class="header">
    <nav class="nav">
      <a class="brand" href="index.html"><img src="assets/img/alm-logo.png" alt="Allegiance List Marketing logo"></a>
      <div class="links">
        <a href="index.html#services">Services</a>
        <a href="marketplace.html"><b>Marketplace</b></a>
      </div>
    </nav>
  </header>

  <main class="wrap">
    <h1>Data Card Marketplace</h1>
    <p class="lead">Browse our catalog of data cards. Click any item for full details, pricing, selects, and audience profile.</p>

    <div class="search">
      <input id="q" type="search" placeholder="Search by titleâ€¦ (e.g., Real America, Pro-Life, Veterans)">
    </div>

    <section id="cards" class="grid" aria-live="polite"></section>
  </main>

  <script>
    const el=(s,d=document)=>d.querySelector(s);
    const list=el('#cards'); const q=el('#q');
    function fmt(n){return (n||0).toLocaleString()}
    function cardHTML(x){return `
      <article class="card">
        <h2 style="font-size:1.15rem;margin:0">${x.title}</h2>
        <div class="meta">
          <span class="pill">Universe: ${fmt(x.universe)}</span>
          <span class="pill">Base Rate: $${(+x.baseRate||0).toFixed(2)}/M</span>
          <span class="pill">Updated: ${x.lastUpdate||''}</span>
        </div>
        <a class="btn" href="datacard.html?id=${x.id}">View details</a>
      </article>`;}
    let items=[];
    async function load(){ items = await (await fetch('data/datacards.json',{cache:'no-store'})).json(); render(); }
    function render(filter=''){
      const f = filter.trim().toLowerCase();
      list.innerHTML = items
        .filter(x => !f || x.title.toLowerCase().includes(f))
        .sort((a,b)=>a.title.localeCompare(b.title))
        .map(cardHTML).join('');
    }
    q.addEventListener('input', e=>render(e.target.value));
    load();
  </script>
</body>
</html>
